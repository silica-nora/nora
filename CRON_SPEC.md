# 定时记忆任务规范

## 概述

每小时自动记录对话摘要和值得记住的事情，每天 0 点汇总成日文件并同步到长期记忆。

## 文件格式

### 小时文件
- **命名**：`memory/YYYY-MM-DD_HH.md`
- **编号**：0~23，对应小时
- **内容**：
  ```markdown
  # YYYY-MM-DD HH:00 - HH+1:00

  ## 对话摘要
  - ...

  ## 值得记住的事情
  - ...
  ```

### 日文件
- **命名**：`memory/YYYY-MM-DD.md`
- **内容**：
  ```markdown
  # YYYY-MM-DD

  ## 汇总

  ### YYYY-MM-DD_00.md
  ...

  ### YYYY-MM-DD_23.md
  ...

  ## 今日总结
  - ...
  ```

## 定时任务

### 任务 A：每小时记忆（1:00-23:00）
- **触发**：`--every 1h`
- **执行**：1:00 ~ 23:00 整点触发
- **写入**：当前小时 - 1 的文件（当天）
  - 1:00 → 写入 `2026-02-26_00.md`（0:00-1:00）
  - 2:00 → 写入 `2026-02-26_01.md`
  - ...
  - 23:00 → 写入 `2026-02-26_22.md`
- **规则**：有对话/产出才写，无则跳过

### 任务 B：每天 0 点汇总
- **触发**：`--cron "0 0 * * *"`（每天 0:00）
- **执行**：
  1. 写入**前一天**的 23 号文件：`2026-02-25_23.md`（23:00-24:00）
  2. 读取前一天全部 24 个小时文件（00~23）
  3. 合并成前一天的日文件：`2026-02-25.md`
  4. 同步更新 `MEMORY.md` 长期记忆

## 实现方式

- 使用 `openclaw cron` 创建定时任务
- 每次触发 **isolated sub-agent** 执行
- 避免污染主会话

## 规则

1. 有对话或学习到新东西才写小时文件
2. 无产出则跳过该小时文件
3. 0 点任务必须完成：小时文件写入 + 日汇总 + MEMORY.md 更新
